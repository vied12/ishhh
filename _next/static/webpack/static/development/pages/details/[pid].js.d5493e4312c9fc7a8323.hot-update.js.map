{"version":3,"file":"static/webpack/static/development/pages/details/[pid].js.d5493e4312c9fc7a8323.hot-update.js","sources":["webpack:///./components/Details.js"],"sourcesContent":["import React, { Component } from 'react'\nimport Footer from './Footer'\nimport Galery from './Galery'\nimport { withStyles } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport logo from '../images/ishhh-NB-MD.png'\nimport Link from 'next/link'\nimport StripeCheckout from 'react-stripe-checkout'\nimport Selector from './Selector'\nimport { connect } from 'react-redux'\nimport compose from 'recompose/compose'\nimport Router from 'next/router'\n\nconst REGIONS = {\n  Germany: 5,\n  Europe: 7,\n  World: 9,\n}\nconst styles = theme => ({\n  root: {\n    textAlign: 'center',\n  },\n  logoContainer: {\n    marginTop: 40,\n    marginBottom: 100,\n    display: 'inline-block',\n  },\n  logo: {\n    maxWidth: '70%',\n    maxHeight: 200,\n  },\n  images: {\n    margin: [[70, 0]],\n  },\n  image: {\n    display: 'inline-block',\n    width: '40%',\n    maxWidth: 600,\n    boxShadow: '0 0 1px rgba(0, 0, 0, .4)',\n    margin: 20,\n    position: 'relative',\n    [theme.breakpoints.down('sm')]: {\n      width: '100%',\n      margin: 0,\n      marginBottom: 40,\n    },\n    '& img': {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      width: '100%',\n      height: '100%',\n      objectFit: 'cover',\n    },\n    '&:after': {\n      content: '\"\"',\n      display: 'block',\n      paddingBottom: '100%',\n    },\n  },\n  title: {\n    marginTop: 40,\n    marginBottom: 40,\n  },\n  cgv: {\n    textAlign: 'left',\n    maxWidth: 600,\n    margin: 'auto',\n    padding: 20,\n    marginTop: 60,\n    '& h2': {\n      fontSize: '.9rem',\n    },\n    '& p': {\n      fontSize: '.9rem',\n    },\n  },\n})\n\nclass Details extends Component {\n  state = {\n    item: null,\n    error: false,\n    chosenSize: '',\n    chosenRegion: '',\n  }\n\n  handleToken = token => {\n    const { item } = this.props\n    const { chosenSize } = this.state\n    fetch(\n      'https://wt-d7f3465bba4be50c0e0805107a2dddb9-0.sandbox.auth0-extend.com/stripe-payment/payment',\n      {\n        method: 'POST',\n        body: JSON.stringify({\n          stripeToken: token.id,\n          amount: (parseInt(item.price, 10) + this.getShippingPrice()) * 100,\n          currency: 'EUR',\n          description: `${item.name} ${chosenSize}`,\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      },\n    ).then(d => {\n      if (d.ok) {\n        Router.push('/payment-successful')\n      } else {\n        d.text().then(text => {\n          this.setState({ error: text })\n        })\n      }\n    })\n  }\n\n  getShippingPrice = () => {\n    return REGIONS[this.state.chosenRegion]\n  }\n\n  render() {\n    const { classes, item } = this.props\n    const { chosenSize, chosenRegion, error } = this.state\n    if (!item) {\n      return null\n    }\n    const shippingPrice = this.getShippingPrice()\n    return (\n      <div className={classes.root}>\n        <Link href=\"/\" className={classes.logoContainer}>\n          <img src={logo} alt=\"ISHHH\" className={classes.logo} />\n        </Link>\n        {!!error && (\n          <div style={{ margin: 80 }}>\n            <Typography variant=\"h2\" color=\"error\">\n              Sorry, an error occured.\n            </Typography>\n            <Typography>{error}</Typography>\n            <Typography>\n              Please try again,{' '}\n              <a href=\"https://m.me/ishhhliebedich\">or contact us</a>\n            </Typography>\n          </div>\n        )}\n        <Typography variant=\"h5\" className={classes.title} gutterBottom>\n          {item.name}\n        </Typography>\n        <div className={classes.images}>\n          <div className={classes.image}>\n            <img src={item.detail || item.front} alt=\"front\" />\n          </div>\n          <div className={classes.image}>\n            <img src={item.back} alt=\"back\" />\n          </div>\n        </div>\n        <Typography variant=\"h4\" gutterBottom>\n          Buy online\n        </Typography>\n        {item.description &&\n          item.description.split('\\n').map((s, i) => (\n            <Typography key={i} gutterBottom>\n              {s}\n            </Typography>\n          ))}\n        <Selector\n          value={chosenSize}\n          label=\"Sizes\"\n          onChange={s => this.setState({ chosenSize: s })}\n          choices={item.sizes || []}\n        />\n        <Selector\n          value={chosenRegion}\n          label=\"Region\"\n          onChange={s => this.setState({ chosenRegion: s })}\n          choices={Object.keys(REGIONS)}\n        />\n        <StripeCheckout\n          stripeKey={process.env.REACT_APP_STRIPE_KEY}\n          token={this.handleToken}\n          currency=\"EUR\"\n          amount={(parseInt(item.price, 10) + shippingPrice) * 100}\n          name=\"ISHHH\"\n          locale=\"auto\"\n          billingAddress={false}\n          shippingAddress\n          // bitcoin\n          disabled={!chosenSize || !chosenRegion}\n        >\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            style={{ margin: 40 }}\n            disabled={!chosenSize || !chosenRegion}\n          >\n            Order now\n          </Button>\n        </StripeCheckout>\n        <Typography variant=\"h4\">{item.price} €</Typography>\n        <Typography>\n          Shipping:{' '}\n          {shippingPrice ? (\n            `+ ${shippingPrice} €`\n          ) : (\n            <Typography variant=\"caption\">Select a region first</Typography>\n          )}\n        </Typography>\n        <Typography variant=\"caption\" style={{ padding: 20 }}>\n          We do not store your credit card information.\n          <br />\n          We instead rely on the secure third-party payment processor Stripe.\n          <br />\n          You may also want to read Stripe's privacy policy:{' '}\n          <a\n            href=\"https://stripe.com/us/privacy\"\n            target=\"_blank\"\n            rel=\"nofollow noreferrer noopener\"\n            style={{ color: 'black' }}\n          >\n            https://stripe.com/us/privacy\n          </a>\n        </Typography>\n        <div className={classes.cgv}>\n          <Typography gutterBottom variant=\"h5\">\n            Processing time\n          </Typography>\n          <Typography gutterBottom>1-3 business days</Typography>\n\n          <Typography gutterBottom variant=\"h5\">\n            Estimated shipping times\n          </Typography>\n          <Typography gutterBottom>\n            Europe: 3-6 business days\n            <br />\n            I'll do my best to meet these shipping estimates, but can't\n            guarantee them.\n          </Typography>\n\n          <Typography gutterBottom variant=\"h5\">\n            Customs and import taxes\n          </Typography>\n          <Typography gutterBottom>\n            Buyers are responsible for any customs and import taxes that may\n            apply. I'm not responsible for delays due to customs.\n          </Typography>\n\n          <Typography gutterBottom variant=\"h5\">\n            I accept returns, exchanges and cancellations\n          </Typography>\n          <Typography gutterBottom>\n            Contact me within: 24 hours of delivery\n            <br />\n            Ship items back within: 7 days of delivery\n            <br />\n            Request a cancellation within: 12 hours of purchase\n          </Typography>\n\n          <Typography gutterBottom variant=\"h5\">\n            Conditions of return\n          </Typography>\n          <Typography gutterBottom>\n            Buyers are responsible for return shipping costs. If the item is not\n            returned in its original condition, the buyer is responsible for any\n            loss in value.\n          </Typography>\n\n          <Typography gutterBottom variant=\"h5\">\n            Questions about your order?\n          </Typography>\n          <Typography gutterBottom>\n            Please{' '}\n            <Button\n              color=\"primary\"\n              target=\"_blank\"\n              size=\"small\"\n              rel=\"nofollow noreferrer noopener\"\n              href=\"https://m.me/ishhhliebedich\"\n            >\n              Contact Me\n            </Button>{' '}\n            if you have any problems with your order.\n          </Typography>\n        </div>\n        <Typography variant=\"h4\" gutterBottom style={{ marginTop: 200 }}>\n          Others clothes available\n        </Typography>\n        <Galery />\n        <Footer />\n      </div>\n    )\n  }\n}\n\nexport default compose(\n  withStyles(styles),\n  connect((state, { itemId }) => ({\n    item: state.inventory.data.find(d => d.key === itemId),\n  })),\n)(Details)\n"],"mappings":"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","sourceRoot":""}